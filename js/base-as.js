(function(a){function f(){var c=n(this);isNaN(c.datetime)||a(this).text(g(c.datetime));return this}function n(c){c=a(c);if(c.data("timeago")===undefined){c.data("timeago",{datetime:s.datetime(c)});var b=a.trim(c.text());b.length>0&&c.attr("title",b)}return c.data("timeago")}function g(c){return s.inWords(o(c))}function o(c){return(new Date).getTime()-c.getTime()}function m(c,b){return(a.isFunction(c)?c(b):c).replace(/%d/i,b)}a.timeago=function(c){return c instanceof Date?g(c):typeof c=="string"?g(a.timeago.parse(c)):
g(a.timeago.datetime(c))};var s=a.timeago;a.extend(a.timeago,{settings:{refreshMillis:6E4,allowFuture:false,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",ago:null,fromNow:null,seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years"}},inWords:function(c){var b=this.settings.strings,d=b.prefixAgo,
e=b.suffixAgo||b.ago;if(this.settings.allowFuture){if(c<0){d=b.prefixFromNow;e=b.suffixFromNow||b.fromNow}c=Math.abs(c)}c=c/1E3;var h=c/60,k=h/60,p=k/24,v=p/365;b=c<45&&m(b.seconds,Math.round(c))||c<90&&m(b.minute,1)||h<45&&m(b.minutes,Math.round(h))||h<90&&m(b.hour,1)||k<24&&m(b.hours,Math.round(k))||k<48&&m(b.day,1)||p<30&&m(b.days,Math.floor(p))||p<60&&m(b.month,1)||p<365&&m(b.months,Math.floor(p/30))||v<2&&m(b.year,1)||m(b.years,Math.floor(v));return a.trim([d,b,e].join(" "))},parse:function(c){c=
a.trim(c);c=c.replace(/-/,"/").replace(/-/,"/");c=c.replace(/T/," ").replace(/Z/," UTC");c=c.replace(/([\+-]\d\d)\:?(\d\d)/," $1$2");return new Date(c)},datetime:function(c){c=a(c).is("time")?a(c).attr("datetime"):a(c).attr("title");return s.parse(c)}});a.fn.timeago=function(){var c=this;c.each(f);var b=s.settings;b.refreshMillis>0&&setInterval(function(){c.each(f)},b.refreshMillis);return c};document.createElement("abbr");document.createElement("time")})(jQuery);(function(a){a.toJSON=function(g){if(typeof JSON=="object"&&JSON.stringify)return JSON.stringify(g);var o=typeof g;if(g===null)return"null";if(o!="undefined"){if(o=="number"||o=="boolean")return g+"";if(o=="string")return a.quoteString(g);if(o=="object"){if(typeof g.toJSON=="function")return a.toJSON(g.toJSON());if(g.constructor===Date){var m=g.getUTCMonth()+1;if(m<10)m="0"+m;var s=g.getUTCDate();if(s<10)s="0"+s;o=g.getUTCFullYear();var c=g.getUTCHours();if(c<10)c="0"+c;var b=g.getUTCMinutes();if(b<
10)b="0"+b;var d=g.getUTCSeconds();if(d<10)d="0"+d;g=g.getUTCMilliseconds();if(g<100)g="0"+g;if(g<10)g="0"+g;return'"'+o+"-"+m+"-"+s+"T"+c+":"+b+":"+d+"."+g+'Z"'}if(g.constructor===Array){m=[];for(s=0;s<g.length;s++)m.push(a.toJSON(g[s])||"null");return"["+m.join(",")+"]"}m=[];for(s in g){o=typeof s;if(o=="number")o='"'+s+'"';else if(o=="string")o=a.quoteString(s);else continue;if(typeof g[s]!="function"){c=a.toJSON(g[s]);m.push(o+":"+c)}}return"{"+m.join(", ")+"}"}}};a.evalJSON=function(g){if(typeof JSON==
"object"&&JSON.parse)return JSON.parse(g);return eval("("+g+")")};a.secureEvalJSON=function(g){if(typeof JSON=="object"&&JSON.parse)return JSON.parse(g);var o=g;o=o.replace(/\\["\\\/bfnrtu]/g,"@");o=o.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");o=o.replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(o))return eval("("+g+")");else throw new SyntaxError("Error parsing JSON, source is not valid.");};a.quoteString=function(g){if(g.match(f))return'"'+g.replace(f,
function(o){var m=n[o];if(typeof m==="string")return m;m=o.charCodeAt();return"\\u00"+Math.floor(m/16).toString(16)+(m%16).toString(16)})+'"';return'"'+g+'"'};var f=/["\\\x00-\x1f\x7f-\x9f]/g,n={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"}})(jQuery);(function(a){if(!a||!(a.toJSON||Object.toJSON||JSON))throw new Error("jQuery, MooTools or Prototype needs to be loaded before jStorage!");a.jStorage={version:"0.1.1",_storage:{},_storage_service:{jStorage:"{}"},_storage_elm:null,json_encode:a.toJSON||Object.toJSON||JSON.encode,json_decode:a.evalJSON||JSON&&JSON.decode||function(f){return String(f).evalJSON()},_init:function(){if("localStorage"in window)this._storage_service=window.localStorage;else if("globalStorage"in window)this._storage_service=
window.globalStorage[document.domain];else{this._storage_elm=document.createElement("link");if("addBehavior"in this._storage_elm){this._storage_elm.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(this._storage_elm);this._storage_elm.load("jStorage");try{var f=this._storage_elm.getAttribute("jStorage")}catch(n){f="{}"}if(f&&f.length)this._storage_service.jStorage=f}else{this._storage_elm=null;return}}if("jStorage"in this._storage_service&&this._storage_service.jStorage)try{this._storage=
this.json_decode(this._storage_service.jStorage)}catch(g){this._storage_service.jStorage="{}"}else this._storage_service.jStorage="{}"},_save:function(){if(this._storage_service){try{this._storage_service.jStorage=this.json_encode(this._storage)}catch(f){}if(this._storage_elm)try{this._storage_elm.setAttribute("jStorage",this._storage_service.jStorage);this._storage_elm.save("jStorage")}catch(n){}}},_checkKey:function(f){if(!f||typeof f!="string"&&typeof f!="number")throw new TypeError("Key name must be string or numeric");
return true},set:function(f,n){this._checkKey(f);this._storage[f]=n;this._save();return n},get:function(f,n){this._checkKey(f);if(f in this._storage)return this._storage[f];return n?n:null},deleteKey:function(f){this._checkKey(f);if(f in this._storage){delete this._storage[f];this._save();return true}return false},flush:function(){this._storage={};this._save();return true}};a.jStorage._init()})(typeof jQuery!="undefined"&&jQuery||$);(function(a){var f,n=/:([\w\d]+)/g,g=/\?([^#]*)$/,o=decodeURIComponent,m=function(c){return function(b,d){return this.route.apply(this,[c,b,d])}},s=[];f=function(){var c=a.makeArray(arguments),b,d;f.apps=f.apps||{};if(c.length===0||c[0]&&a.isFunction(c[0]))return f.apply(f,["body"].concat(c));else if(typeof(d=c.shift())=="string"){b=f.apps[d]||new f.Application;b.element_selector=d;c.length>0&&a.each(c,function(e,h){b.use(h)});b.element_selector!=d&&delete f.apps[d];return f.apps[b.element_selector]=
b}};f.VERSION="0.5.3";f.addLogger=function(c){s.push(c)};f.log=function(){var c=a.makeArray(arguments);c.unshift("["+Date()+"]");a.each(s,function(b,d){d.apply(f,c)})};if(typeof window.console!="undefined")a.isFunction(console.log.apply)?f.addLogger(function(){window.console.log.apply(console,arguments)}):f.addLogger(function(){window.console.log(arguments)});else typeof console!="undefined"&&f.addLogger(function(){console.log.apply(console,arguments)});f.Object=function(c){return a.extend(this,c||
{})};a.extend(f.Object.prototype,{toHash:function(){var c={};a.each(this,function(b,d){a.isFunction(d)||(c[b]=d)});return c},toHTML:function(){var c="";a.each(this,function(b,d){a.isFunction(d)||(c+="<strong>"+b+"</strong> "+d+"<br />")});return c},uuid:function(){if(typeof this._uuid=="undefined"||!this._uuid)this._uuid=(new Date).getTime()+"-"+parseInt(Math.random()*1E3,10);return this._uuid},keys:function(c){var b=[];for(var d in this)if(!a.isFunction(this[d])||!c)b.push(d);return b},has:function(c){return this[c]&&
a.trim(this[c].toString())!=""},join:function(){var c=a.makeArray(arguments),b=c.shift();return c.join(b)},log:function(){f.log.apply(f,arguments)},toString:function(c){var b=[];a.each(this,function(d,e){if(!a.isFunction(e)||c)b.push('"'+d+'": '+e.toString())});return"Sammy.Object: {"+b.join(",")+"}"}});f.HashLocationProxy=function(c,b){this.app=c;this.is_native=false;this._startPolling(b)};f.HashLocationProxy.prototype={bind:function(){var c=this,b=this.app;a(window).bind("hashchange."+this.app.eventNamespace(),
function(d,e){if(c.is_native===false&&!e){f.log("native hash change exists, using");c.is_native=true;clearInterval(f.HashLocationProxy._interval)}b.trigger("location-changed")})},unbind:function(){a(window).unbind("hashchange."+this.app.eventNamespace())},getLocation:function(){var c=window.location.toString().match(/^[^#]*(#.+)$/);return c?c[1]:""},setLocation:function(c){return window.location=c},_startPolling:function(c){var b=this;if(!f.HashLocationProxy._interval){c||(c=10);var d=function(){current_location=
b.getLocation();if(!f.HashLocationProxy._last_location||current_location!=f.HashLocationProxy._last_location)setTimeout(function(){a(window).trigger("hashchange",[true])},1);f.HashLocationProxy._last_location=current_location};d();f.HashLocationProxy._interval=setInterval(d,c);a(window).bind("beforeunload",function(){clearInterval(f.HashLocationProxy._interval)})}}};f.DataLocationProxy=function(c,b){this.app=c;this.data_name=b||"sammy-location"};f.DataLocationProxy.prototype={bind:function(){var c=
this;this.app.$element().bind("setData",function(b,d,e){if(d==c.data_name){c.app.$element().each(function(){a.data(this,c.data_name,e)});c.app.trigger("location-changed")}})},unbind:function(){this.app.$element().unbind("setData")},getLocation:function(){return this.app.$element().data(this.data_name)},setLocation:function(c){return this.app.$element().data(this.data_name,c)}};f.Application=function(c){var b=this;this.routes={};this.listeners=new f.Object({});this.arounds=[];this.befores=[];this.namespace=
this.uuid();this.context_prototype=function(){f.EventContext.apply(this,arguments)};this.context_prototype.prototype=new f.EventContext;a.isFunction(c)&&c.apply(this,[this]);if(!this.location_proxy)this.location_proxy=new f.HashLocationProxy(b,this.run_interval_every);this.debug&&this.bindToAllEvents(function(d,e){b.log(b.toString(),d.cleaned_type,e||{})})};f.Application.prototype=a.extend({},f.Object.prototype,{ROUTE_VERBS:["get","post","put","delete"],APP_EVENTS:["run","unload","lookup-route","run-route",
"route-found","event-context-before","event-context-after","changed","error","check-form-submission","redirect"],_last_route:null,_running:false,element_selector:"body",debug:false,raise_errors:false,run_interval_every:50,location_proxy:null,template_engine:null,toString:function(){return"Sammy.Application:"+this.element_selector},$element:function(){return a(this.element_selector)},use:function(){var c=a.makeArray(arguments),b=c.shift();try{c.unshift(this);b.apply(this,c)}catch(d){if(typeof b=="undefined")this.error("Plugin Error: called use() but plugin is not defined",
d);else a.isFunction(b)?this.error("Plugin Error",d):this.error("Plugin Error: called use() but '"+b.toString()+"' is not a function",d)}return this},route:function(c,b,d){var e=this,h=[],k;if(!d&&a.isFunction(b)){d=b=c;c="any"}c=c.toLowerCase();if(b.constructor==String){for(n.lastIndex=0;(path_match=n.exec(b))!==null;)h.push(path_match[1]);b=new RegExp("^"+b.replace(n,"([^/]+)")+"$")}if(typeof d=="string")d=e[d];k=function(p){var v={verb:p,path:b,callback:d,param_names:h};e.routes[p]=e.routes[p]||
[];e.routes[p].push(v)};c==="any"?a.each(this.ROUTE_VERBS,function(p,v){k(v)}):k(c);return this},get:m("get"),post:m("post"),put:m("put"),del:m("delete"),any:m("any"),mapRoutes:function(c){var b=this;a.each(c,function(d,e){b.route.apply(b,e)});return this},eventNamespace:function(){return["sammy-app",this.namespace].join("-")},bind:function(c,b,d){var e=this;if(typeof d=="undefined")d=b;b=function(h,k){var p;if(k&&k.context){p=k.context;delete k.context}else p=new e.context_prototype(e,"bind",h.type,
k);h.cleaned_type=h.type.replace(e.eventNamespace(),"");d.apply(p,[h,k])};this.listeners[c]||(this.listeners[c]=[]);this.listeners[c].push(b);this.isRunning()&&this._listen(c,b);return this},trigger:function(c,b){this.$element().trigger([c,this.eventNamespace()].join("."),[b]);return this},refresh:function(){this.last_location=null;this.trigger("location-changed");return this},before:function(c,b){if(a.isFunction(c)){b=c;c={}}this.befores.push([c,b]);return this},after:function(c){return this.bind("event-context-after",
c)},around:function(c){this.arounds.push(c);return this},isRunning:function(){return this._running},helpers:function(c){a.extend(this.context_prototype.prototype,c);return this},helper:function(c,b){this.context_prototype.prototype[c]=b;return this},run:function(c){if(this.isRunning())return false;var b=this;a.each(this.listeners.toHash(),function(d,e){a.each(e,function(h,k){b._listen(d,k)})});this.trigger("run",{start_url:c});this._running=true;this.last_location=null;this.getLocation()==""&&typeof c!=
"undefined"&&this.setLocation(c);this._checkLocation();this.location_proxy.bind();this.bind("location-changed",function(){b._checkLocation()});this.bind("submit",function(d){return b._checkFormSubmission(a(d.target).closest("form"))===false?d.preventDefault():false});a(window).bind("beforeunload",function(){b.unload()});return this.trigger("changed")},unload:function(){if(!this.isRunning())return false;var c=this;this.trigger("unload");this.location_proxy.unbind();this.$element().unbind("submit").removeClass(c.eventNamespace());
a.each(this.listeners.toHash(),function(b,d){a.each(d,function(e,h){c._unlisten(b,h)})});this._running=false;return this},bindToAllEvents:function(c){var b=this;a.each(this.APP_EVENTS,function(d,e){b.bind(e,c)});a.each(this.listeners.keys(true),function(d,e){b.APP_EVENTS.indexOf(e)==-1&&b.bind(e,c)});return this},routablePath:function(c){return c.replace(g,"")},lookupRoute:function(c,b){var d=this,e=false;this.trigger("lookup-route",{verb:c,path:b});typeof this.routes[c]!="undefined"&&a.each(this.routes[c],
function(h,k){if(d.routablePath(b).match(k.path)){e=k;return false}});return e},runRoute:function(c,b,d){var e=this,h=this.lookupRoute(c,b),k,p,v,i,t,q,w;this.log("runRoute",[c,b].join(" "));this.trigger("run-route",{verb:c,path:b,params:d});if(typeof d=="undefined")d={};a.extend(d,this._parseQueryString(b));if(h){this.trigger("route-found",{route:h});if((path_params=h.path.exec(this.routablePath(b)))!==null){path_params.shift();a.each(path_params,function(z,l){if(h.param_names[z])d[h.param_names[z]]=
o(l);else{if(!d.splat)d.splat=[];d.splat.push(o(l))}})}k=new this.context_prototype(this,c,b,d);v=this.arounds.slice(0);i=this.befores.slice(0);q=[k].concat(d.splat);p=function(){for(var z;i.length>0;){t=i.shift();if(e.contextMatchesOptions(k,t[0])){z=t[1].apply(k,[k]);if(z===false)return false}}e.last_route=h;k.trigger("event-context-before",{context:k});z=h.callback.apply(k,q);k.trigger("event-context-after",{context:k});return z};a.each(v.reverse(),function(z,l){var x=p;p=function(){return l.apply(k,
[x])}});try{w=p()}catch(y){this.error(["500 Error",c,b].join(" "),y)}return w}else return this.notFound(c,b)},contextMatchesOptions:function(c,b,d){b=b;if(typeof b==="undefined"||b=={})return true;if(typeof d==="undefined")d=true;if(typeof b==="string"||a.isFunction(b.test))b={path:b};if(b.only)return this.contextMatchesOptions(c,b.only,true);else if(b.except)return this.contextMatchesOptions(c,b.except,false);var e=true,h=true;if(b.path)e=a.isFunction(b.path.test)?b.path.test(c.path):b.path.toString()===
c.path;if(b.verb)h=b.verb===c.verb;return d?h&&e:!(h&&e)},getLocation:function(){return this.location_proxy.getLocation()},setLocation:function(c){return this.location_proxy.setLocation(c)},swap:function(c){return this.$element().html(c)},notFound:function(c,b){b=this.error(["404 Not Found",c,b].join(" "));return c==="get"?b:true},error:function(c,b){b||(b=new Error);b.message=[c,b.message].join(" ");this.trigger("error",{message:b.message,error:b});if(this.raise_errors)throw b;else this.log(b.message,
b)},_checkLocation:function(){var c,b;c=this.getLocation();if(c!=this.last_location)b=this.runRoute("get",c);this.last_location=c;return b},_checkFormSubmission:function(c){var b,d;this.trigger("check-form-submission",{form:c});b=a(c);c=b.attr("action");d=a.trim(b.attr("method").toString().toLowerCase());if(!d||d=="")d="get";this.log("_checkFormSubmission",b,c,d);b=a.extend({},this._parseFormParams(b),{$form:b});c=this.runRoute(d,c,b);return typeof c=="undefined"?false:c},_parseFormParams:function(c){var b=
{};a.each(c.serializeArray(),function(d,e){if(b[e.name])if(a.isArray(b[e.name]))b[e.name].push(e.value);else b[e.name]=[b[e.name],e.value];else b[e.name]=e.value});return b},_parseQueryString:function(c){var b={},d,e;if(c=c.match(g)){c=c[1].split("&");for(e=0;e<c.length;e+=1){d=c[e].split("=");b[d[0]]=o(d[1])}}return b},_listen:function(c,b){return this.$element().bind([c,this.eventNamespace()].join("."),b)},_unlisten:function(c,b){return this.$element().unbind([c,this.eventNamespace()].join("."),
b)}});f.EventContext=function(c,b,d,e){this.app=c;this.verb=b;this.path=d;this.params=new f.Object(e)};f.EventContext.prototype=a.extend({},f.Object.prototype,{$element:function(){return this.app.$element()},partial:function(c,b,d){var e,h,k,p="partial:"+c,v=this;if(h=c.match(/\.([^\.]+)$/))h=h[1];if((!h||!a.isFunction(v[h]))&&this.app.template_engine)h=this.app.template_engine;if(h&&!a.isFunction(h)&&a.isFunction(v[h]))h=v[h];if(!d&&a.isFunction(b)){d=b;b={}}k=a.isArray(b)?b:[b||{}];e=function(i){var t=
i,q="";a.each(k,function(w,y){if(a.isFunction(h))t=h.apply(v,[i,y]);q+=t;if(d)return d.apply(v,[t,w])});d||v.swap(q);v.trigger("changed")};this.app.cache_partials&&this.cache(p)?e.apply(v,[this.cache(p)]):a.get(c,function(i){v.app.cache_partials&&v.cache(p,i);e.apply(v,[i])})},redirect:function(){var c;c=a.makeArray(arguments);var b=this.app.getLocation();if(c.length>1){c.unshift("/");c=this.join.apply(this,c)}else c=c[0];this.trigger("redirect",{to:c});this.app.last_location=this.path;this.app.setLocation(c);
b==c&&this.app.trigger("location-changed")},trigger:function(c,b){if(typeof b=="undefined")b={};if(!b.context)b.context=this;return this.app.trigger(c,b)},eventNamespace:function(){return this.app.eventNamespace()},swap:function(c){return this.app.swap(c)},notFound:function(){return this.app.notFound(this.verb,this.path)},toString:function(){return"Sammy.EventContext: "+[this.verb,this.path,this.params].join(" ")}});a.sammy=window.Sammy=f})(jQuery);(function(a){a.fn.autoResize=function(f){var n=a.extend({onResize:function(){},animate:true,animateDuration:150,animateCallback:function(){},extraSpace:20,limit:1E3},f);this.filter("textarea").each(function(){var g=a(this).css({resize:"none","overflow-y":"hidden"}),o=g.height(),m=function(){var b={};a.each(["height","width","lineHeight","textDecoration","letterSpacing","title"],function(d,e){b[e]=g.css(e)});return g.clone().removeAttr("id").removeAttr("name").css({position:"absolute",top:0,left:-9999}).css(b).attr("tabIndex",
"-1").insertBefore(g)}(),s=null,c=function(){m.height(0).val(a(this).val()).scrollTop(1E4);var b=Math.max(m.scrollTop(),o)+n.extraSpace,d=a(this).add(m);if(s!==b){s=b;if(b>=n.limit)a(this).css("overflow-y","");else{n.onResize.call(this);n.animate&&g.css("display")==="block"?d.stop().animate({height:b},n.animateDuration,n.animateCallback):d.height(b)}}};g.unbind(".dynSiz").bind("keyup.dynSiz",c).bind("keydown.dynSiz",c).bind("change.dynSiz",c)});return this}})(jQuery);jQuery.extend(jQuery.easing,{easeInOutExpo:function(a,f,n,g,o){if(f==0)return n;if(f==o)return n+g;if((f/=o/2)<1)return g/2*Math.pow(2,10*(f-1))+n;return g/2*(-Math.pow(2,-10*--f)+2)+n}});jQuery(function(){jQuery("div.svwp").prepend("<img src='images/ss.gif' class='ldrgif' alt='loading...'/ >")});var j=0;
jQuery.fn.slideViewerPro=function(a){a=jQuery.extend({galBorderWidth:6,thumbsTopMargin:3,thumbsRightMargin:3,thumbsBorderWidth:3,buttonsWidth:20,galBorderColor:"#ff0000",thumbsBorderColor:"#d8d8d8",thumbsActiveBorderColor:"#ff0000",buttonsTextColor:"#ff0000",thumbsBorderOpacity:1,thumbsActiveBorderOpacity:1,easeTime:750,asTimer:4E3,thumbs:5,thumbsPercentReduction:12,thumbsVis:true,easeFunc:"easeInOutExpo",leftButtonInner:"-",rightButtonInner:"+",autoslide:false,typo:false,typoFullOpacity:0.9,shuffle:false},
a);return this.each(function(){function f(k){for(var p=k.size();--p;){var v=Math.floor(Math.random()*p),i=k.slice(p,p+1);k.slice(v,v+1).insertAfter(i)}}var n=jQuery(this);!a.shuffle||f(n.find("li"));n.find("img.ldrgif").remove();n.removeClass("svwp").addClass("slideViewer");n.attr("id","svwp"+j);var g=n.find("img").attr("width"),o=n.find("img").attr("height"),m=n.find("li").size();m>=a.thumbs||(a.thumbs=m);var s=g*m,c=Math.round(g*a.thumbsPercentReduction/100),b=Math.round(o*a.thumbsPercentReduction/
100),d=0,e=true,h=true;n.find("ul").css("width",s).wrap(jQuery("<div style='width:"+g+"px; overflow: hidden; position: relative; top: 0; left: 0'>"));n.css("width",g);n.css("height",o);n.each(function(k){function p(){d==m-a.thumbs?i.addClass("r_dis"):i.removeClass("r_dis");d==m-a.thumbs?(e=false):(e=true);d==0?v.addClass("l_dis"):v.removeClass("l_dis");d==0?(h=false):(h=true)}a.typo&&jQuery(this).find("img").each(function(){jQuery(this).after("<span class='typo' style='position: absolute; width:"+
(g-12)+"px; margin: 0 0 0 -"+g+"px'>"+jQuery(this).attr("alt")+"</span>")});jQuery(this).after("<div class='thumbSlider' id='thumbSlider"+j+"'><ul></ul></div>");jQuery(this).next().after("<a href='#' class='left' id='left"+j+"'><span>"+a.leftButtonInner+"</span></a><a href='#' class='right' id='right"+j+"'><span>"+a.rightButtonInner+"</span></a>");jQuery(this).find("li").each(function(){jQuery("div#thumbSlider"+j+" ul").append("<li><a title='"+jQuery(this).find("img").attr("alt")+"' href='#'><img width='"+
c+"' height='"+b+"' src='"+jQuery(this).find("img").attr("src")+"' /><p class='tmbrdr'>&nbsp;</p></a></li>")});jQuery("div#thumbSlider"+j+" a").each(function(y){jQuery(this).bind("click",function(){jQuery(this).find("p.tmbrdr").css({borderColor:a.thumbsActiveBorderColor,opacity:a.thumbsActiveBorderOpacity});jQuery(this).parent().parent().find("p.tmbrdr").not(jQuery(this).find("p.tmbrdr")).css({borderColor:a.thumbsBorderColor,opacity:a.thumbsBorderOpacity});var z=-(g*y);z!=n.find("ul").css("left").replace(/px/,
"")&&n.find("span.typo").animate({opacity:0},250);n.find("ul").animate({left:z},a.easeTime,a.easeFunc,function(){n.find("span.typo").animate({opacity:a.typoFullOpacity},250)});return false})});var v=jQuery("a#left"+j),i=jQuery("a#right"+j);i.bind("click",function(){if(e)m-d>a.thumbs*2||m%a.thumbs==0?(d+=a.thumbs):(d+=m%a.thumbs);e=false;jQuery(this).prev().prev().find("ul:not(:animated)").animate({left:-(c+a.thumbsRightMargin)*d},500,a.easeFunc,function(){p()});return false});v.bind("click",function(){if(h&&
d!=0)m-d>a.thumbs||m%a.thumbs==0?(d-=a.thumbs):(d-=m%a.thumbs);h=false;jQuery(this).prev().find("ul:not(:animated)").animate({left:-(c+a.thumbsRightMargin)*d},500,a.easeFunc,function(){p()});return false});var t=a.thumbsBorderWidth,q=a.galBorderWidth;jQuery(".slideViewer a img").css({border:"0"});a.typo&&jQuery(this).find("span.typo").each(function(){jQuery(this).css({marginTop:o-jQuery(this).innerHeight(),opacity:a.typoFullOpacity})});jQuery("div#svwp"+j).css({border:a.galBorderWidth+"px solid "+
a.galBorderColor});jQuery("div#thumbSlider"+j).css({position:"relative",left:q,top:a.thumbsTopMargin+"px",width:a.thumbs*c+(a.thumbsRightMargin*a.thumbs-a.thumbsRightMargin),height:b,textAlign:"center",overflow:"hidden",margin:"0 auto"});jQuery("div#thumbSlider"+j+" ul").css({width:c*m+a.thumbsRightMargin*m,position:"relative",left:"0",top:"0"});jQuery("div#thumbSlider"+j+" ul li").css({marginRight:a.thumbsRightMargin});jQuery("div#thumbSlider"+j).find("p.tmbrdr").css({width:c-t*2+"px",height:b-t*
2+"px",top:-b+"px",border:a.thumbsBorderWidth+"px solid "+a.thumbsBorderColor,opacity:a.thumbsBorderOpacity});jQuery("div#thumbSlider"+j+" a:first p.tmbrdr").css({borderColor:a.thumbsActiveBorderColor,opacity:a.thumbsActiveBorderOpacity});t=g/2+jQuery("div#thumbSlider"+j).width()/2+a.thumbsRightMargin+q;q=g/2-jQuery("div#thumbSlider"+j).width()/2-(a.buttonsWidth+a.thumbsRightMargin)+q;var w=jQuery("a#right"+j+" span img").attr("height");jQuery("a#left"+j).css({display:"block",textAlign:"center",width:a.buttonsWidth+
"px",height:b+"px",margin:-(b-a.thumbsTopMargin)+"px 0 0 "+q+"px",textDecoration:"none",lineHeight:b+"px",color:a.buttonsTextColor});jQuery("a#right"+j).css({display:"block",textAlign:"center",width:a.buttonsWidth+"px",height:b+"px",margin:-b+"px 0 0 "+t+"px",textDecoration:"none",lineHeight:b+"px",color:a.buttonsTextColor});jQuery("a#left"+j+" span img").css({margin:Math.round(b/2-w/2)+"px 0 0 0"});jQuery("a#right"+j+" span img").css({margin:Math.round(b/2-w/2)+"px 0 0 0"});p();if(a.autoslide){k=
1;jQuery("div#thumbSlider"+j).everyTime(a.asTimer,"asld",function(){jQuery(this).find("a").eq(k).trigger("click");if(k==0){d=0;h=false;jQuery("div#thumbSlider"+j).find("ul:not(:animated)").animate({left:-(c+a.thumbsRightMargin)*d},500,a.easeFunc,function(){p()})}else h=true;k%a.thumbs==0&&jQuery(this).next().next().trigger("click");k<m-1?k++:(k=0)});jQuery("a#right"+j).bind("mouseup",function(){jQuery(this).prev().prev().stopTime("asld")});jQuery("a#left"+j).bind("mouseup",function(){jQuery(this).prev().stopTime("asld")});
jQuery("div#thumbSlider"+j+" a").bind("mouseup",function(){jQuery(this).parent().parent().parent().stopTime("asld")})}t=a.thumbsVis?"block":"none";jQuery("div#thumbSlider"+j+", a#left"+j+", a#right"+j).wrapAll("<div style='width:"+g+"px; display: "+t+"' id='ui"+j+"'></div>");jQuery("div#svwp"+j+", div#ui"+j).wrapAll("<div style='width:"+g+"px'></div>")});jQuery("div#thumbSlider"+j).width()+a.buttonsWidth*2>=g&&alert("ALERT: THE THUMBNAILS SLIDER IS TOO WIDE! \nthumbsPercentReduction and/or buttonsWidth needs to be scaled down!");
j++})};var css={properties:function(){var a=[/^\s*0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)\s+(?:0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)\s+)?$/i,/^\s*(?:#(?:[0-9a-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|transparent|inherit)\s+$/i,/^\s*(?:none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset|inherit)\s+$/i,/^\s*(?:thin|medium|thick|0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)|inherit)\s+$/i,/^\s*(?:(?:(?:thin|medium|thick|0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)|none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset|#(?:[0-9a-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|transparent|inherit)\s+)+|inherit\s+)$/i,
/^\s*(?:none|inherit)\s+$/i,/^\s*(?:url\("[^\(\)\\\"\r\n]+"\)|none|inherit)\s+$/i,/^\s*(?:0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)|0|(?:\d+(?:\.\d+)?)%|auto|inherit)\s+$/i,/^\s*(?:0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|0|[+-]?\d+(?:\.\d+)?%|none|inherit)\s+$/i,/^\s*(?:0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|0|[+-]?\d+(?:\.\d+)?%|inherit)\s+$/i,/^\s*(?:(?:0(?:\.[0-9]+)?|\.[0-9]+|1(?:\.0+)?)|inherit)\s+$/i,/^\s*(?:(?:(?:#(?:[0-9a-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|invert|inherit|none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset|thin|medium|thick|0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc))\s+)+|inherit\s+)$/i,
/^\s*(?:#(?:[0-9a-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|invert|inherit)\s+$/i,/^\s*(?:visible|hidden|scroll|auto|no-display|no-content)\s+$/i,/^\s*(?:auto|always|avoid|left|right|inherit)\s+$/i,/^\s*(?:0|[+-]?\d+(?:\.\d+)?m?s|0|(?:\d+(?:\.\d+)?)%|inherit)\s+$/i,/^\s*(?:0|[+-]?\d+(?:\.\d+)?|inherit)\s+$/i,/^\s*(?:clip|ellipsis)\s+$/i,/^\s*(?:normal|0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)|inherit)\s+$/i];return{"-moz-border-radius":a[0],
"-moz-opacity":a[10],"-moz-outline":a[11],"-moz-outline-color":a[12],"-moz-outline-style":a[2],"-moz-outline-width":a[3],"-o-text-overflow":a[17],"-webkit-border-radius":a[0],azimuth:/^\s*(?:0|[+-]?\d+(?:\.\d+)?(?:deg|g?rad)\s+|(?:(?:left-side|far-left|left|center-left|center|center-right|right|far-right|right-side|behind)\s+)+|leftwards\s+|rightwards\s+|inherit\s+)$/i,background:/^\s*(?:(?:(?:(?:#(?:[0-9a-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|transparent|inherit)\s+|(?:url\("[^\(\)\\\"\r\n]+"\)|none|inherit)\s+|(?:repeat|repeat-x|repeat-y|no-repeat|inherit)\s+|(?:scroll|fixed|inherit)\s+|(?:0|(?:\d+(?:\.\d+)?)%|0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)|left|center|right)\s+(?:(?:0|(?:\d+(?:\.\d+)?)%|0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)|top|center|bottom)\s+)?|(?:(?:left|center|right|top|bottom)\s+)+|inherit\s+))+|inherit\s+)$/i,
"background-attachment":/^\s*(?:scroll|fixed|inherit)\s+$/i,"background-color":a[1],"background-image":a[6],"background-position":/^\s*(?:(?:0|(?:\d+(?:\.\d+)?)%|0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)|left|center|right)\s+(?:(?:0|(?:\d+(?:\.\d+)?)%|0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)|top|center|bottom)\s+)?|(?:(?:left|center|right|top|bottom)\s+)+|inherit\s+)$/i,"background-repeat":/^\s*(?:repeat|repeat-x|repeat-y|no-repeat|inherit)\s+$/i,border:/^\s*(?:(?:(?:thin|medium|thick|0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)|none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset|#(?:[0-9a-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|transparent)\s+)+|inherit\s+)$/i,
"border-bottom":a[4],"border-bottom-color":a[1],"border-bottom-style":a[2],"border-bottom-width":a[3],"border-collapse":/^\s*(?:collapse|separate|inherit)\s+$/i,"border-color":/^\s*(?:(?:(?:#(?:[0-9a-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|transparent)\s+){1,4}|inherit\s+)$/i,"border-left":a[4],"border-left-color":a[1],"border-left-style":a[2],"border-left-width":a[3],"border-radius":a[0],"border-right":a[4],"border-right-color":a[1],
"border-right-style":a[2],"border-right-width":a[3],"border-spacing":/^\s*(?:0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)\s+(?:0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)\s+)?|inherit\s+)$/i,"border-style":/^\s*(?:(?:(?:none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset)\s+){1,4}|inherit\s+)$/i,"border-top":a[4],"border-top-color":a[1],"border-top-style":a[2],"border-top-width":a[3],"border-width":/^\s*(?:(?:(?:thin|medium|thick|0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc))\s+){1,4}|inherit\s+)$/i,
bottom:a[7],"caption-side":/^\s*(?:top|bottom|inherit)\s+$/i,clear:/^\s*(?:none|left|right|both|inherit)\s+$/i,clip:/^\s*(?:auto|inherit)\s+$/i,color:/^\s*(?:#(?:[0-9a-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|inherit)\s+$/i,"counter-increment":a[5],"counter-reset":a[5],cue:/^\s*(?:(?:(?:url\("[^\(\)\\\"\r\n]+"\)|none|inherit)\s+)+|inherit\s+)$/i,"cue-after":a[6],"cue-before":a[6],cursor:/^\s*(?:(?:url\("[^\(\)\\\"\r\n]+"\)\s+,\s+)*(?:auto|crosshair|default|pointer|move|e-resize|ne-resize|nw-resize|n-resize|se-resize|sw-resize|s-resize|w-resize|text|wait|help|progress|all-scroll|col-resize|hand|no-drop|not-allowed|row-resize|vertical-text)|inherit)\s+$/i,
direction:/^\s*(?:ltr|rtl|inherit)\s+$/i,display:/^\s*(?:inline|block|list-item|run-in|inline-block|table|inline-table|table-row-group|table-header-group|table-footer-group|table-row|table-column-group|table-column|table-cell|table-caption|none|inherit|-moz-inline-box|-moz-inline-stack)\s+$/i,elevation:/^\s*(?:0|[+-]?\d+(?:\.\d+)?(?:deg|g?rad)|below|level|above|higher|lower|inherit)\s+$/i,"empty-cells":/^\s*(?:show|hide|inherit)\s+$/i,"float":/^\s*(?:left|right|none|inherit)\s+$/i,font:/^\s*(?:(?:(?:normal|italic|oblique|inherit|small-caps|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)\s+)+(?:xx-small|x-small|small|medium|large|x-large|xx-large|(?:small|larg)er|0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|0|[+-]?\d+(?:\.\d+)?%|inherit)\s+(?:\/\s+(?:normal|0|(?:\d+(?:\.\d+)?)|0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|0|[+-]?\d+(?:\.\d+)?%|inherit)\s+)?(?:(?:"\w(?:[\w-]*\w)(?:\s+\w([\w-]*\w))*"|serif|sans-serif|cursive|fantasy|monospace)\s+(?:,\s+(?:"\w(?:[\w-]*\w)(?:\s+\w([\w-]*\w))*"|serif|sans-serif|cursive|fantasy|monospace)\s+)*|inherit\s+)|caption\s+|icon\s+|menu\s+|message-box\s+|small-caption\s+|status-bar\s+|inherit\s+)$/i,
"font-family":/^\s*(?:(?:"\w(?:[\w-]*\w)(?:\s+\w([\w-]*\w))*"|serif|sans-serif|cursive|fantasy|monospace)\s+(?:,\s+(?:"\w(?:[\w-]*\w)(?:\s+\w([\w-]*\w))*"|serif|sans-serif|cursive|fantasy|monospace)\s+)*|inherit\s+)$/i,"font-size":/^\s*(?:xx-small|x-small|small|medium|large|x-large|xx-large|(?:small|larg)er|0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|0|[+-]?\d+(?:\.\d+)?%|inherit)\s+$/i,"font-stretch":/^\s*(?:normal|wider|narrower|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded)\s+$/i,
"font-style":/^\s*(?:normal|italic|oblique|inherit)\s+$/i,"font-variant":/^\s*(?:normal|small-caps|inherit)\s+$/i,"font-weight":/^\s*(?:normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit)\s+$/i,height:a[7],left:a[7],"letter-spacing":a[18],"line-height":/^\s*(?:normal|0|(?:\d+(?:\.\d+)?)|0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|0|[+-]?\d+(?:\.\d+)?%|inherit)\s+$/i,"list-style":/^\s*(?:(?:(?:disc|circle|square|decimal|decimal-leading-zero|lower-roman|upper-roman|lower-greek|lower-latin|upper-latin|armenian|georgian|lower-alpha|upper-alpha|none|inherit|inside|outside|url\("[^\(\)\\\"\r\n]+"\))\s+)+|inherit\s+)$/i,
"list-style-image":a[6],"list-style-position":/^\s*(?:inside|outside|inherit)\s+$/i,"list-style-type":/^\s*(?:disc|circle|square|decimal|decimal-leading-zero|lower-roman|upper-roman|lower-greek|lower-latin|upper-latin|armenian|georgian|lower-alpha|upper-alpha|none|inherit)\s+$/i,margin:/^\s*(?:(?:(?:0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)|0|(?:\d+(?:\.\d+)?)%|auto)\s+){1,4}|inherit\s+)$/i,"margin-bottom":a[7],"margin-left":a[7],"margin-right":a[7],"margin-top":a[7],"max-height":a[8],"max-width":a[8],
"min-height":a[9],"min-width":a[9],opacity:a[10],outline:a[11],"outline-color":a[12],"outline-style":a[2],"outline-width":a[3],overflow:/^\s*(?:visible|hidden|scroll|auto|inherit)\s+$/i,"overflow-x":a[13],"overflow-y":a[13],padding:/^\s*(?:(?:(?:0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|0|[+-]?\d+(?:\.\d+)?%)\s+){1,4}|inherit\s+)$/i,"padding-bottom":a[9],"padding-left":a[9],"padding-right":a[9],"padding-top":a[9],"page-break-after":a[14],"page-break-before":a[14],"page-break-inside":/^\s*(?:avoid|auto|inherit)\s+$/i,
pause:/^\s*(?:(?:(?:0|[+-]?\d+(?:\.\d+)?m?s|0|(?:\d+(?:\.\d+)?)%)\s+){1,2}|inherit\s+)$/i,"pause-after":a[15],"pause-before":a[15],pitch:/^\s*(?:0|(?:\d+(?:\.\d+)?)k?Hz|x-low|low|medium|high|x-high|inherit)\s+$/i,"pitch-range":a[16],"play-during":/^\s*(?:url\("[^\(\)\\\"\r\n]+"\)\s+(?:(?:mix|repeat)\s+)+|auto\s+|none\s+|inherit\s+)$/i,position:/^\s*(?:static|relative|absolute|inherit)\s+$/i,quotes:a[5],richness:a[16],right:a[7],speak:/^\s*(?:normal|none|spell-out|inherit)\s+$/i,"speak-header":/^\s*(?:once|always|inherit)\s+$/i,
"speak-numeral":/^\s*(?:digits|continuous|inherit)\s+$/i,"speak-punctuation":/^\s*(?:code|none|inherit)\s+$/i,"speech-rate":/^\s*(?:0|[+-]?\d+(?:\.\d+)?|x-slow|slow|medium|fast|x-fast|faster|slower|inherit)\s+$/i,stress:a[16],"table-layout":/^\s*(?:auto|fixed|inherit)\s+$/i,"text-align":/^\s*(?:left|right|center|justify|inherit)\s+$/i,"text-decoration":/^\s*(?:none\s+|(?:(?:underline|overline|line-through|blink)\s+)+|inherit\s+)$/i,"text-indent":/^\s*(?:0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)|0|(?:\d+(?:\.\d+)?)%|inherit)\s+$/i,
"text-overflow":a[17],"text-shadow":/^\s*(?:none\s+|(?:(?:(?:#(?:[0-9a-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow)\s+0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)\s+0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)\s+(?:0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)\s+)?|0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)\s+0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)\s+(?:0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)\s+)?(?:(?:#(?:[0-9a-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow)\s+)?),\s+)*(?:(?:#(?:[0-9a-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow)\s+0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)\s+0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)\s+(?:0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)\s+)?|0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)\s+0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)\s+(?:0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)\s+)?(?:(?:#(?:[0-9a-f]{3}){1,2}|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow)\s+)?))$/i,
"text-transform":/^\s*(?:capitalize|uppercase|lowercase|none|inherit)\s+$/i,"text-wrap":/^\s*(?:normal|unrestricted|none|suppress)\s+$/i,top:a[7],"unicode-bidi":/^\s*(?:normal|embed|bidi-override|inherit)\s+$/i,"vertical-align":/^\s*(?:baseline|sub|super|top|text-top|middle|bottom|text-bottom|0|(?:\d+(?:\.\d+)?)%|0|[+-]?\d+(?:\.\d+)?(?:em|ex|px|in|cm|mm|pt|pc)|inherit)\s+$/i,visibility:/^\s*(?:visible|hidden|collapse|inherit)\s+$/i,"voice-family":/^\s*(?:(?:(?:"\w(?:[\w-]*\w)(?:\s+\w([\w-]*\w))*"|male|female|child)\s+,\s+)*(?:"\w(?:[\w-]*\w)(?:\s+\w([\w-]*\w))*"|male|female|child)|inherit)\s+$/i,
volume:/^\s*(?:0|(?:\d+(?:\.\d+)?)|0|[+-]?\d+(?:\.\d+)?%|silent|x-soft|soft|medium|loud|x-loud|inherit)\s+$/i,"white-space":/^\s*(?:normal|pre|nowrap|pre-wrap|pre-line|inherit|-o-pre-wrap|-moz-pre-wrap|-pre-wrap)\s+$/i,width:/^\s*(?:0|(?:\d+(?:\.\d+)?)(?:em|ex|px|in|cm|mm|pt|pc)|0|[+-]?\d+(?:\.\d+)?%|auto|inherit)\s+$/i,"word-spacing":a[18],"word-wrap":/^\s*(?:normal|break-word)\s+$/i,"z-index":/^\s*(?:auto|-?\d+|inherit)\s+$/i,zoom:/^\s*(?:normal|0|(?:\d+(?:\.\d+)?)|0|[+-]?\d+(?:\.\d+)?%)\s+$/i}}(),
alternates:{"float":["cssFloat","styleFloat"]},HISTORY_INSENSITIVE_STYLE_WHITELIST:{display:true,filter:true,"float":true,height:true,left:true,opacity:true,overflow:true,position:true,right:true,top:true,visibility:true,width:true,"padding-left":true,"padding-right":true,"padding-top":true,"padding-bottom":true}},html,html4;html4={};html4.atype={NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10};
html4.ATTRIBS={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::tabindex":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,
"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,
"colgroup::valign":0,"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,
"iframe::longdesc":1,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::longdesc":1,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,
"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,
"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,
"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,
"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0};html4.eflags={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128};
html4.ELEMENTS={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:4,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,noframes:20,noscript:20,object:16,ol:0,optgroup:0,option:1,p:1,param:18,pre:0,
q:0,s:0,samp:0,script:84,select:0,small:0,span:0,strike:0,strong:0,style:148,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,"var":0};
html=function(){function a(l){var x;return l=t(l),c.hasOwnProperty(l)?c[l]:(x=l.match(h),x?String.fromCharCode(parseInt(x[1],10)):(x=l.match(i))?String.fromCharCode(parseInt(x[1],16)):"")}function f(l,x){return a(x)}function n(l){return l.replace(y,"")}function g(l){return l.replace(k,f)}function o(l){return l.replace(e,"&amp;").replace(w,"&lt;").replace(v,"&gt;").replace(z,"&#34;").replace(p,"&#61;")}function m(l){return l.replace(q,"&amp;$1").replace(w,"&lt;").replace(v,"&gt;")}function s(l){return function(x,
B){var F,E,u,r,A,C,G,H,D;x=String(x);C=null;G=false;E=[];D=void 0;A=void 0;H=void 0;for(l.startDoc&&l.startDoc(B);x;){r=x.match(G?b:d);x=x.substring(r[0].length);if(G)if(r[1]){F=t(r[1]);if(r[2]){r=r[3];switch(r.charCodeAt(0)){case 34:case 39:r=r.substring(1,r.length-1)}r=g(n(r))}else r=F;E.push(F,r)}else{if(r[4]){A!==void 0&&(H?l.startTag&&l.startTag(D,E,B):l.endTag&&l.endTag(D,B));H&&A&(html4.eflags.CDATA|html4.eflags.RCDATA)&&(C===null?(C=t(x)):(C=C.substring(C.length-x.length)),u=C.indexOf("</"+
D),u<0&&(u=x.length),A&html4.eflags.CDATA?l.cdata&&l.cdata(x.substring(0,u),B):l.rcdata&&l.rcdata(m(x.substring(0,u)),B),x=x.substring(u));D=A=H=void 0;E.length=0;G=false}}else if(r[1])l.pcdata&&l.pcdata(r[0],B);else if(r[3]){H=!r[2];G=true;D=t(r[3]);A=html4.ELEMENTS.hasOwnProperty(D)?html4.ELEMENTS[D]:void 0}else if(r[4])l.pcdata&&l.pcdata(r[4],B);else if(r[5])if(l.pcdata)switch(r[5]){case "<":l.pcdata("&lt;",B);break;case ">":l.pcdata("&gt;",B);break;default:l.pcdata("&amp;",B)}}l.endDoc&&l.endDoc(B)}}
var c,b,d,e,h,k,p,v,i,t,q,w,y,z;"script"==="SCRIPT".toLowerCase()?(t=function(l){return l.toLowerCase()}):(t=function(l){return l.replace(/[A-Z]/g,function(x){return String.fromCharCode(x.charCodeAt(0)|32)})});c={lt:"<",gt:">",amp:"&",nbsp:"\u00a0",quot:'"',apos:"'"};h=/^#(\d+)$/;i=/^#x([0-9A-Fa-f]+)$/;y=/\0/g;k=/&(#\d+|#x[0-9A-Fa-f]+|\w+);/g;e=/&/g;q=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi;w=/</g;v=/>/g;z=/\"/g;p=/\=/g;b=new RegExp("^\\s*(?:(?:([a-z][a-z-]*)(\\s*=\\s*(\"[^\"]*\"|'[^']*'|(?=[a-z][a-z-]*\\s*=)|[^>\"'\\s]*))?)|(/?>)|.[^\\w\\s>]*)",
"i");d=new RegExp("^(?:&(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);|<!--[\\s\\S]*?--\>|<!\\w[^>]*>|<\\?[^>*]*>|<(/)?([a-z][a-z0-9]*)|([^<&>]+)|([<&>]))","i");return{normalizeRCData:m,escapeAttrib:o,unescapeEntities:g,makeSaxParser:s}}();
html.makeHtmlSanitizer=function(a){var f,n;return html.makeSaxParser({startDoc:function(){n=[];f=false},startTag:function(g,o,m){var s,c,b;if(!f)if(html4.ELEMENTS.hasOwnProperty(g)){s=html4.ELEMENTS[g];if(!(s&html4.eflags.FOLDABLE)){if(s&html4.eflags.UNSAFE)return f=!(s&html4.eflags.EMPTY),void 0;if(o=a(g,o)){s&html4.eflags.EMPTY||n.push(g);m.push("<",g);s=0;for(c=o.length;s<c;s+=2){g=o[s];b=o[s+1];b!==null&&b!==void 0&&m.push(" ",g,'="',html.escapeAttrib(b),'"')}m.push(">")}}}},endTag:function(g,
o){var m,s,c;if(f)return f=false,void 0;if(html4.ELEMENTS.hasOwnProperty(g)){m=html4.ELEMENTS[g];if(!(m&(html4.eflags.UNSAFE|html4.eflags.EMPTY|html4.eflags.FOLDABLE))){if(m&html4.eflags.OPTIONAL_ENDTAG)for(s=n.length;--s>=0;){c=n[s];if(c===g)break;if(!(html4.ELEMENTS[c]&html4.eflags.OPTIONAL_ENDTAG))return}else for(s=n.length;--s>=0;)if(n[s]===g)break;if(!(s<0)){for(m=n.length;--m>s;){c=n[m];html4.ELEMENTS[c]&html4.eflags.OPTIONAL_ENDTAG||o.push("</",c,">")}n.length=s;o.push("</",g,">")}}}},pcdata:function(g,
o){f||o.push(g)},rcdata:function(g,o){f||o.push(g)},cdata:function(g,o){f||o.push(g)},endDoc:function(g){var o;for(o=n.length;--o>=0;)g.push("</",n[o],">");n.length=0}})};
function html_sanitize(a,f,n){var g=[];return html.makeHtmlSanitizer(function(o,m){var s,c,b,d,e;for(d=0;d<m.length;d+=2){c=m[d];e=m[d+1];b=null;((s=o+"::"+c,html4.ATTRIBS.hasOwnProperty(s))||(s="*::"+c,html4.ATTRIBS.hasOwnProperty(s)))&&(b=html4.ATTRIBS[s]);if(b!==null)switch(b){case html4.atype.SCRIPT:case html4.atype.STYLE:e=null;break;case html4.atype.IDREF:case html4.atype.IDREFS:case html4.atype.GLOBAL_NAME:case html4.atype.LOCAL_NAME:case html4.atype.CLASSES:e=n?n(e):e;break;case html4.atype.URI:e=
f&&f(e);break;case html4.atype.URI_FRAGMENT:e&&"#"===e.charAt(0)?(e=n?n(e):e,e&&(e="#"+e)):(e=null)}else e=null;m[d+1]=e}return m})(a,g),g.join("")};jQuery.getFeed=function(a){a=jQuery.extend({url:null,data:null,success:null},a);a.url&&$.ajax({type:"GET",url:a.url,data:a.data,dataType:"xml",success:function(f){f=new JFeed(f);jQuery.isFunction(a.success)&&a.success(f)}})};function JFeed(a){a&&this.parse(a)}
JFeed.prototype={type:"",version:"",title:"",link:"",description:"",parse:function(a){if(jQuery("channel",a).length==1){this.type="rss";var f=new JRss(a)}else if(jQuery("feed",a).length==1){this.type="atom";f=new JAtom(a)}f&&jQuery.extend(this,f)}};function JFeedItem(){}JFeedItem.prototype={title:"",link:"",description:"",updated:"",id:""};function JAtom(a){this._parse(a)}
JAtom.prototype={_parse:function(a){var f=jQuery("feed",a).eq(0);this.version="1.0";this.title=jQuery(f).find("title:first").text();this.link=jQuery(f).find("link:first").attr("href");this.description=jQuery(f).find("subtitle:first").text();this.language=jQuery(f).attr("xml:lang");this.updated=jQuery(f).find("updated:first").text();this.items=[];var n=this;jQuery("entry",a).each(function(){var g=new JFeedItem;g.title=jQuery(this).find("title").eq(0).text();g.link=jQuery(this).find("link").eq(0).attr("href");
g.description=jQuery(this).find("content").eq(0).text();g.updated=jQuery(this).find("updated").eq(0).text();g.id=jQuery(this).find("id").eq(0).text();n.items.push(g)})}};function JRss(a){this._parse(a)}
JRss.prototype={_parse:function(a){this.version=jQuery("rss",a).length==0?"1.0":jQuery("rss",a).eq(0).attr("version");var f=jQuery("channel",a).eq(0);this.title=jQuery(f).find("title:first").text();this.link=jQuery(f).find("link:first").text();this.description=jQuery(f).find("description:first").text();this.language=jQuery(f).find("language:first").text();this.updated=jQuery(f).find("lastBuildDate:first").text();this.items=[];var n=this;jQuery("item",a).each(function(){var g=new JFeedItem;g.title=
jQuery(this).find("title").eq(0).text();g.link=jQuery(this).find("link").eq(0).text();g.description=jQuery(this).find("description").eq(0).text();g.updated=jQuery(this).find("pubDate").eq(0).text();g.id=jQuery(this).find("guid").eq(0).text();n.items.push(g)})}};var utils=function(){function a(b,d,e){e=e?' target="_blank"':"";return['<a href="',b,'"',e,">",d,"</a>"].join("")}function f(b){return $.timeago(b.replace(/\.[^\-]*.\-/,"-"))}function n(){return Math.floor(Math.random()*1E18).toString(36)}function g(b){b=html_sanitize(b,function(d){if(/^https?:\/\//.test(d))return d},function(d){return d});return b.replace(/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/g,function(d){return(result=m(d))!=d?result:(result=s(d))!=
d?result:(result=o(d))!=d?result:a(d,d,true)})}function o(b){return b.replace(/(^|[\n ])http(|s):\/\/.+(jpg|jpeg|gif|png|bmp)/i,function(d){return['<p><a class="inline" href="',d,'" target="_blank"><img class="inline" src="',d,'" alt=""/></a></p>'].join("")})}function m(b){return b.replace(/http:\/\/(www.)?youtube\.com\/watch\?v=([A-Za-z0-9._%-]*)[&\w;=\+_\-]*/,function(d,e,h){return[a(d,d,true),'<p><object id="vid',h,'" width="500" height="300"><param name="movie" value="http://www.youtube.com/v/',
h,'?autoplay=1"></param><param name="wmode" value="transparent"></param><embed src="http://www.youtube.com/v/',h,'?autoplay=0" type="application/x-shockwave-flash" wmode="transparent" width="500" height="300"></embed></object></p>'].join("")})}function s(b){return b.replace(/http:\/\/(www.)?vimeo\.com\/([A-Za-z0-9._%-]*)[&\w;=\+_\-]*/,function(d,e,h){return a(d,d,true)+'<p><object width="500" height="300"><param name="movie" value="http://vimeo.com/moogaloop.swf?clip_id='+h+'&amp;server=vimeo.com&amp;show_title=0&amp;show_byline=0&amp;show_portrait=0&amp;color=00adef&amp;fullscreen=1"></param><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><embed src="http://vimeo.com/moogaloop.swf?clip_id='+
h+'&amp;server=vimeo.com&amp;show_title=0&amp;show_byline=0&amp;show_portrait=0&amp;color=00adef&amp;fullscreen=1" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="500" height="300"></embed></object></p>'})}function c(b,d){if(d)return d+" ("+b.xhr.status+" "+b.xhr.statusText+")";else{try{var e=$.evalJSON(b.xhr.responseText).message+" ("+b.xhr.status+" "+b.xhr.statusText+")"}catch(h){e=b.xhr.status+" "+b.xhr.statusText}return e}}return{linkTo:a,resolveURLs:g,
timeAgoInWords:f,randBase32:n,formatXhrMsg:c}}();var webCenter=function(a){function f(i,t){webCenter.settings=h;webCenter.server=[location.protocol,"//",h.hostname,":",h.port].join("");if(typeof i=="object")$.extend(h,i);else t=i;webCenter.resourceIndexURL=[webCenter.server,h.resourceIndexPath].join("");n(function(q){q.error?t(q):v.getCurrentUser(function(w){if(w.error)t(false);else{$.jStorage.set("wc",webCenter);webCenter.currentUser=w;t(w)}})})}function n(i){try{$.extend(webCenter,{resourceIndex:$.jStorage.get("wc",webCenter).resourceIndex})}catch(t){}if(webCenter.resourceIndex)if(i)i(webCenter.resourceIndex);
else return webCenter.resourceIndex;else $.ajax({url:webCenter.resourceIndexURL,dataType:"json",error:function(q){i&&i({error:true,xhr:q})},success:function(q){webCenter.resourceIndex=q;if(i)i(q);else return webCenter.resourceIndex}})}function g(i,t,q,w,y,z){if(!w)w=h.perPage;z=z?["&projection=",z].join(""):"";var l=$.grep(i,function(x){if(typeof t=="object"){if(x.rel==t.rel&&x.resourceType==t.resourceType)return true}else if(x.rel==t||x.resourceType==t)return true});if(l.length>0){if(q==false&&typeof q==
"boolean")if(l.length>1){l=$.grep(i,function(x){return x.rel=="alternate"});return l.length==1?[l[0].href,z].join(""):null}else return[l[0].href,z].join("");if(l[0].template){if(q==true&&typeof q=="boolean")return[l[0].template,z].join("");i=l[0].template.replace("{itemsPerPage}",w);q||(q="0");i=i.replace("{startIndex}",q);if(y)for(param in y)i=i.replace(["{",param,"}"].join(""),y[param]);return[i,z].join("")}else return l[0].href}else return null}function o(i,t){i=$.grep(i,function(q){return q.type==
t});return i.length>0?i[0]:null}function m(i){return window.parent&&window.parent.currentCtrlState?/\?/.test(i)?[i,"&_adf.ctrl-state=",window.parent.currentCtrlState].join(""):[i,"?_adf.ctrl-state=",window.parent.currentCtrlState].join(""):i}function s(i){var t=i.message.replace(/\{[^\}]*\}/g,function(q){var w=$.grep(i.templateParams.items,function(l){return l.key==q})[0];try{var y=$.grep(w.links,function(l){return l.type=="text/html"})[0].href;return[' <a href="',m(y),'" target="_top" class="',w.type,
'" rel="',w.id,'">',w.displayName,"</a> "].join("")}catch(z){return[" ",w.displayName].join("")}});if(i.groupSpace)t=[t,' in <a href="',m(webCenter.getResourceURL(i.groupSpace.links,"urn:oracle:webcenter:space",false)),'" target="_top">',i.groupSpace.displayName,"</a>"].join("");return t}function c(i){return $.browser.webkit?["[nodeName=",i,"]"].join(""):i.split(":").join("\\:")}function b(i,t,q){$.ajax({type:"get",dataType:$.browser.msie?"text":"xml",url:i,error:function(){q&&q.count>0&&q.frequency>
0&&b(i,t,q,q.count-1,q.frequency)},success:function(w){var y;if(typeof w=="string"){y=new ActiveXObject("Microsoft.XMLDOM");y.async=false;y.loadXML(w)}else y=w;t(y)}})}function d(i,t){webCenter.cmisObjectByPathUri?t([webCenter.cmisObjectByPathUri,i].join("")):b(webCenter.getResourceURL(webCenter.resourceIndex.links,"urn:oracle:webcenter:cmis",false,null,null),function(q){q=$.grep($(q).find(c("cmisra:uritemplate")),function(w){return $(w).find(c("cmisra:type")).text()=="objectbypath"});q=$(q).find(c("cmisra:template")).text();
q=q.split("&")[0].replace(/\{[^\}]*\}/g,"");webCenter.cmisObjectByPathUri=q;t([q,i].join(""))})}function e(i,t){if(typeof i=="function"){t=i;var q=webCenter.currentUser.publicFolderPath}if(i==null)q=webCenter.currentUser.publicFolderPath;if(typeof i=="string")q=i;webCenter.getCmisObjectByPathUrl(q,function(w){webCenter.getCmisResource(w,function(y){y=$($.grep($(y).find("a"),function(z){return $(z).text()=="down"})).attr("href");webCenter.currentUser.publicFolderUrl=y;t&&t(y)})})}var h={hostname:location.hostname,
port:location.port,perPage:20,resourceIndexPath:"/rest/api/resourceIndex",dynConverterUri:["/",location.hostname=="webcenter.us.oracle.com"?"wir_idc":"idc","/idcplg?IdcService=GET_DYNAMIC_CONVERSION&RevisionSelectionMethod=LatestReleased&dDocName="].join("")},k=function(){function i(z,l,x){if(l==0)y=true;if(y){l=l?l:0;if(l==0)w=-1;z=typeof z=="object"?webCenter.getResourceURL(z,{resourceType:"urn:oracle:webcenter:activities:stream",rel:"urn:oracle:webcenter:activities:stream"},l,null,{personal:true,
connections:true,groupSpaces:true,serviceIds:""}):z.replace("{startIndex}",l).replace("{itemsPerPage}",webCenter.settings.perPage);$.ajax({url:z,dataType:"json",error:function(B){x({error:true,xhr:B})},success:x})}}function t(){return w+=1}function q(){return w}var w=-1,y=true;return{getActivities:i,nextActivityId:t,currentActivityId:q}}(),p=function(){function i(t,q,w){$.ajax({url:t,type:"post",dataType:"json",contentType:"application/json",data:$.toJSON({body:utils.resolveURLs(q)}),error:function(y){w({error:true,
xhr:y})},success:w})}return{postMessage:i}}(),v=function(){function i(u,r){if(u)u(r);else return r}function t(u,r){return[webCenter.server,"/webcenter/profilephoto/",u,"/",r.toUpperCase()].join("")}function q(u){u.publicFolderPath=["/PersonalSpaces/",u.emails.value,"/Public"].join("");u.updateStatus=E;u.avatar=function(r){r=r?r:"";return t(webCenter.currentUser.guid,r)};u.getListNames=z;u.getSpaces=l;u.getSpacesPaged=x;u.getConnections=B;u.getStatus=F;webCenter.currentUser=u;return webCenter.currentUser}
function w(u){try{var r=$.grep(u.templateParams.items,function(C){return C.key=="{actor[0]}"})[0];return $.grep(r.links,function(C){return C.rel=="urn:oracle:webcenter:people:icon"&&C.resourceType=="urn:oracle:webcenter:people:person"})[0].href}catch(A){r=$.grep(u.templateParams.items,function(C){return C.key=="{actor[0]}"})[0];return v.avatarSmall(r.guid)}}function y(u){try{webCenter.currentUser=$.jStorage.get("wc").currentUser}catch(r){}if(webCenter.currentUser){q(webCenter.currentUser);i(u,webCenter.currentUser)}else $.ajax({url:webCenter.getResourceURL(webCenter.resourceIndex.links,
"urn:oracle:webcenter:people",false),dataType:"json",error:function(A){u&&u({error:true,xhr:A})},success:function(A){q(A);u&&u(webCenter.currentUser)}})}function z(u){$.ajax({url:webCenter.getResourceURL(webCenter.currentUser.links,"urn:oracle:webcenter:people:person:listNames",false),dataType:"json",error:function(r){u&&u({error:true,xhr:r})},success:function(r){webCenter.currentUser.listNames=r.items;i(u,r.items)}})}function l(u,r){$.ajax({url:webCenter.getResourceURL(webCenter.resourceIndex.links,
"urn:oracle:webcenter:spaces",false,null,null,r?true:false),dataType:"json",error:function(A){u&&u({error:true,xhr:A})},success:function(A){webCenter.currentUser.spaces=A.items;i(u,A.items)}})}function x(u,r,A){$.ajax({url:webCenter.getResourceURL(webCenter.resourceIndex.links,"urn:oracle:webcenter:spaces",u,r,{projection:"",visibility:""}),dataType:"json",error:function(C){A&&A({error:true,xhr:C})},success:function(C){webCenter.currentUser.spaces=C.items;i(A,C.items)}})}function B(u){$.ajax({url:webCenter.getResourceURL(webCenter.currentUser.links,
"urn:oracle:webcenter:people:person:list",false),dataType:"json",error:function(r){u&&u({error:true,xhr:r})},success:function(r){webCenter.currentUser.connections=r.items;i(u,r.items)}})}function F(u){$.getJSON(webCenter.getResourceURL(webCenter.currentUser.links,"urn:oracle:webcenter:people:person:status",false),function(r){u($.extend(webCenter.currentUser,{status:r.note}))});$.ajax({url:webCenter.getResourceURL(webCenter.currentUser.links,"urn:oracle:webcenter:people:person:status",false),dataType:"json",
error:function(r){u&&u({error:true,xhr:r})},success:function(r){webCenter.currentUser.status=r.items;i(u,r.items)}})}function E(u){$.ajax({url:webCenter.getResourceURL(webCenter.currentUser.links,"urn:oracle:webcenter:people:person:status",false),type:"put",dataType:"json",contentType:"application/json",data:JSON.stringify({note:utils.resolveURLs(u)}),error:function(r){a&&a({error:true,xhr:r})},success:function(r){return r}})}return{avatarSmall:function(u){return t(u,"SMALL")},avatarLarge:function(u){return t(u,
"LARGE")},avatarOriginal:function(u){return t(u,"")},getAvatarUrl:w,getCurrentUser:y}}();return{init:f,activityStream:k,messageBoard:p,userProfile:v,getResourceURL:g,getTemplateItem:o,resolveBindItems:s,getCmisFolderUrl:e,getCmisObjectByPathUrl:d,getCmisResource:b}}();(function(a){function f(b,d){d||(d=7E3);a("#msg").html(b).slideDown().delay(d).slideUp()}function n(b){webCenter.init(function(d){if(d.error){if(d.xhr.status==403){a.jStorage.flush();location.reload()}else d.xhr.status==401&&a("#msg").html('You are not loged in... please <a href="/webcenter/wcAuthentication/?login=true&success_url=/../owccustom/index.html">login</a> first').slideDown();return false}a("#pub-text").bind("keydown",function(e){if(e.keyCode==13){a("#pub-form").submit();return false}});
a("textarea.autoresize").autoResize({extraSpace:0});a(window).scroll(function(){if(a(window).scrollTop()>a(document).height()-a(window).height()-400&&!s){s=true;g(a("#stream").data("currentStreamUrl"),webCenter.activityStream.currentActivityId()+1,false)}});a("#refresh").bind("click",function(){g(a("#stream").data("currentStreamUrl"),0,true);return false});a(".lfopts:first").attr("value",webCenter.getResourceURL(webCenter.resourceIndex.links,"urn:oracle:webcenter:activities:stream",true));a("#groupfilter").bind("change",
function(){var e=this.value?a.evalJSON(this.value).spaceName:escape(a("option:selected",this).text());location.hash=["#/group/",e].join("")});a("#grouppub option:first").attr("value",a.toJSON({msgBoard:webCenter.getResourceURL(webCenter.resourceIndex.links,"urn:oracle:webcenter:messageBoard",false),spaceName:null}));a("#groupfilter option:first").attr("value",webCenter.getResourceURL(webCenter.resourceIndex.links,"urn:oracle:webcenter:activities:stream",false));a("img.slide").live("click",function(){var e=
a(this).parent().next().find("img").attr("src");a(this).parents("div.swvp").next().find(['img[src*="',e.split("/").slice(-1)[0],'"]'].join("")).parent().trigger("click")});webCenter.currentUser.getSpacesPaged(0,1E3,function(e){if(e.error){f(utils.formatXhrMsg(e));b()}else if(webCenter.currentUser.spaces&&webCenter.currentUser.spaces.length==0)b();else for(var h=0;h<e.length;h++){var k=e[h];if(!(window.parent.canPublish&&window.parent.canPublish[k.name]==false&&!/^#\/group\//.test(location.hash)))if(!k.isOffline){var p=
a.toJSON({msgBoard:webCenter.getResourceURL(k.links,"urn:oracle:webcenter:messageBoard",false),asUrl:webCenter.getResourceURL(k.links,"urn:oracle:webcenter:activities:stream",true),spaceName:k.name}),v=a("#grouppub option:first").clone().val(p).text(k.displayName);a("#grouppub").append(v);a("#grouppub option:first").attr("selected","true");k=a("#groupfilter option:first").clone().val(p).text(k.displayName);a("#groupfilter").append(k);a("#groupfilter option:first").attr("selected","true")}}});b()})}
function g(b,d,e,h){webCenter.activityStream.getActivities(b,d,function(k){webCenter.activityStreamResults=k;if(k.error){if(k.xhr.status==403){a.jStorage.flush();location.reload()}f(utils.formatXhrMsg(k))}else{a("#stream").data("currentStreamUrl",b);if(k.items&&k.items.length==0&&d==0){a("#no-activities").removeClass("hide");a("table.results").hide();moreActivities=false}else{a("#no-activities").addClass("hide");a("table.results").show();for(var p="",v=0;v<k.items.length;v++){var i=k.items[v],t=webCenter.activityStream.nextActivityId();
if(!(m.applyActivityTypeBlackList&&m.activityTypeBlacklist[i.activityType])){var q=webCenter.resolveBindItems(i),w=i.detail?i.detail:"";if(i.activityType=="create-document"){var y=a.grep(a(q).filter("a"),function(l){return/\.(jpg|jpeg|gif|png)$/i.test(a(l).text())});if(y[0])w=[w,'<p><a class="inline" href="',a(y[0]).attr("href"),'" target="_blank"><img class="inline hide" src="',a(y[0]).attr("href"),'" /></a></p>'].join("");else{y=a.grep(a(q).filter("a"),function(l){return/\.ppt$|\.pptx$/i.test(a(l).text())});
if(y[0]&&!a.browser.msie){var z=webCenter.activityStream.currentActivityId();y=a(y[0]).attr("rel").split(":").splice(-1);y=[webCenter.settings.dynConverterUri,y].join("");a.ajax({url:y,method:"get",error:function(){},success:function(l){l=a("img",a(l));for(var x="",B=0;B<l.length;B++)x=[x,'<li><img class="slide" src="',a(l[B]).attr("src"),'" width="500" height="375" /></li>'].join("");x=['<div id="det-',z,'" class="swvp"><ul>',x,"</ul></div>"].join();a(x).appendTo(["#act-",z," div.detail"].join("")).slideViewerPro({galBorderWidth:1,
galBorderColor:"#ccc",thumbsBorderWidth:1,thumbsTopMargin:8,thumbsBorderColor:"#ccc",thumbs:4,thumbsBorderOpacity:0.7,leftButtonInner:"&laquo;",rightButtonInner:"&raquo;",thumbsPercentReduction:22})}})}}}p=[p,'<tr id="act-',t,'" class="messages"><td class="avatar"><img class="avatar" width="50" height="50" src="',webCenter.userProfile.getAvatarUrl(i),'"/></td><td class="activity"><span class="activity">',q,'</span> <span class="reltime">',utils.timeAgoInWords(i.createdDate),'</span><div class="detail">',
w,"</div></td></tr>"].join("")}}if(e){a("table.results").empty().append(a(p));o()}else a("table.results").append(a(p));a("table.results *").show();a("img.inline").load(function(){var l=a(this);l.width()>570&&l.width(570);l.fadeIn()});s=false;h&&h()}}})}function o(){a.getFeed({url:"/owc_discussions/rss/rssannounce.jspa",success:function(b){for(var d="",e=0;e<b.items.length;e++){var h=b.items[e];d=[d,'<tr class="sticky messages"><td class="avatar"><img class="avatar" width="50" height="50" src="images/w20_bigger.png"/></td><td class="activity"><span class="activity"><strong>Announcement:</strong> ',
utils.linkTo(h.link,h.title,true),'</span> <span class="reltime">',utils.timeAgoInWords(h.updated),'</span><div class="detail">',utils.resolveURLs(h.description),"</div></td></tr>"].join("")}a("table.announcements").html(a(d)).removeClass("hide")}})}var m={applyActivityTypeBlackList:false,activityTypeBlacklist:{"delete-document":true,deleteGroupSpace:true,editPage:true,deletePage:true,"update-document":true,editListRow:true,addListRow:true,updatePhoto:true,inviteForConnection:true,changeGroupSpaceRole:true,
updateAnnouncement:true}},s=false;a.ajaxSetup({cache:false});a("#pub-loading").hide();a(document).ajaxStart(function(){a("#loading-ind").show()}).ajaxStop(function(){a("#loading-ind").hide()}).ajaxError(function(){a("#loading-ind").hide()});if(!("placeholder"in document.createElement("textarea"))){var c=a("#pub-text").attr("placeholder");a("#pub-text").val(c).focus(function(){this.value==c&&a(this).val("")}).blur(function(){this.value.replace(" ")==""&&a(this).val(c)})}a("a#pub1-attachment").bind("click",
function(){a("#pub-form").attr("action","#/upload");a(this).hide();a("#pub1-attachment-descr").hide();a("#pub1-upload-field").removeClass("hide")});a("#pub1-upload-field a.cancel").bind("click",function(){a("#pub-form").attr("action","#/message");a("#pub1-upload-field input").val("");a("#pub1-upload-field").addClass("hide");a("a#pub1-attachment, #pub1-attachment-descr").show();return false});a.sammy(function(b){var d=false;b.element_selector="#main-content";b.before(function(){var e=b.getLocation();
if(!d){n(function(){d=true;b.runRoute("get",e)});return false}b.trigger("update-filters",e)});b.after(function(){b.getLocation()});b.get("#/",function(){a("#publisher-container").removeClass("hide");a("#stream").css("margin-top",118);g(webCenter.currentUser.links,0,true)});b.get("#/group/:name",function(){var e=this.params.name;if(window.parent.canPublish&&window.parent.canPublish[e]||!window.parent.canPublish){a("#publisher-container").removeClass("hide");a("#stream").css("margin-top",118)}if(e==
"My connections")this.redirect("#/");else{var h=function(){if(webCenter.currentUser.spaces){var k=a.grep(a("#groupfilter option"),function(v){try{return a.evalJSON(a(v).val()).spaceName==decodeURI(e)}catch(i){}})[0];a("#pub1-share span").text(["Share something with ",k.innerHTML].join(""));a("#pub1-share select").hide();k=a.evalJSON(k.value).asUrl;var p=a("li.messages:first");a("ol.results").empty().append(p).hide();g(k,0,true);b.trigger("update-filters",b.getLocation())}else setTimeout(h,100)};h()}});
b.post("#/message",function(){var e=this.params.body.replace(/^\s+|\s+$/g,"");if(e==""||e=="Share something...")return false;webCenter.messageBoard.postMessage(a.evalJSON(this.params.puburl).msgBoard,e,function(h){if(h.error)h.xhr.status==403?f(utils.formatXhrMsg(h,"You do not have access to contribute to this group space. Please contact a group space moderator.")):f();else{a("#pub-text").val("").css("height",18);g(a("#stream").data("currentStreamUrl"),0,true)}})});b.post("#/upload",function(){a("#msg").html("").hide();
var e=this.params,h=e.body;h=h=="Share something..."?"":h;if(!a('#pub-form input[name="fileUpload"]').val()){f("Don't forget to attach a file");a("#pub-form").attr("action","#/upload");return false}a("#pub-loading").show();e=(e=a.evalJSON(e.puburl).spaceName)?["/Spaces/",e].join(""):null;webCenter.getCmisFolderUrl(e,function(k){var p=["uploader",(new Date).getTime()].join(""),v=a(['<iframe name="',p,'" class="hide" />'].join(""));v.load(function(){var i=window.frames[p].document;if((a.browser.msie||
a.browser.webkit?a(i).text():i.getElementsByTagName("location-header")).length>0){a("#msg").html("");a("#pub-text").val("").css("height",18);a("#pub1-upload-field a.cancel").trigger("click");g(a("#stream").data("currentStreamUrl"),0,true,function(){a("#msg").html("").hide();a("#pub-loading").hide();setTimeout(function(){v.remove()},100)})}else{a("#pub-form").attr("action","#/upload");a("#pub-loading").hide();f('Something went wrong with your upload, probably a duplicate file or no access to upload. Check those first. Then send a note to <a href="mailto:irdevadmin_ww@oracle.com?subject=[WebCenter] Error with posting file through publisher">irdevadmin_ww@oracle.com</a>.')}});
a("body:last").append(v);a('#pub-form input[name="contentId"]').val(utils.randBase32());a('#pub-form input[name="comments"]').val(h);a('#pub-form input[name="simpleResponse"]').val(true);a("#pub-form").attr("action",k).attr("target",p).submit()})});b.bind("update-filters",function(e,h){if(/\#\/group\//.test(h)){e=unescape(h.split("#/group/")[1].split("/")[0]);var k=a("#groupfilter option");for(h=0;h<k.length;h++){var p=k[h];p=a(p);var v;try{v=a.evalJSON(p.val()).spaceName}catch(i){}v==e?p.attr("selected",
"1"):p.removeAttr("selected")}k=a("#grouppub option");for(h=0;h<k.length;h++){p=k[h];p=a(p);try{v=a.evalJSON(p.val()).spaceName}catch(t){}v==e?p.attr("selected","1"):p.removeAttr("selected")}}})}).run("#/")})(jQuery);
