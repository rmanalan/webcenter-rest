<!DOCTYPE html>
<html>
  <head> 
    <meta charset="utf-8" />
    <!--[if IE]>
    <script src="http://html5shiv.googlecode com/svn/trunk/html5.js"></script> 
    <![endif]-->
    <script src="./js/jquery.js"></script>
    <script src="./js/pure.js"></script>
    <script src="./js/wcutils.js"></script>
    <script src="./js/wcrest.js"></script>
    <script>
    $(function(){
      $('#log').ajaxError(function(e,r,s){
	$(this).html('<strong>' + r.status + '</strong> on ' + s.url + '<br/><textarea style="width:100%;height:200px">' + r.responseText + '</textarea>')
	  .fadeIn(1000);
        $('#cmispath').text('could not retrieve the CMIS path... try changing the UCM path');
      });
      $('#path').bind('change',function(){
	$('#log').hide();
	var path = $(this);
	if(path.val()!="") {
	  currentUser.getPublicFolderCmisUrl(path.val(),function(url){
	    $('#cmispath').text(url);
	  })
	}
      });
      webCenter.init(function(){
	$('#path').val(currentUser.getPublicFolderPath());
	currentUser.getPublicFolderCmisUrl(function(url){
	  $('#cmispath').text(url);
	})
      });
    })
    </script>
    <style>
      #log {display:none;padding:10px;background:pink;border:1px solid red;}
      #cmispath {color:red}
    </style>
    <title>CMIS Upload Tester</title>
  </head>
  <body>
    <h2>CMIS Upload Tester</h2>
    <div id="log"></div>
    <p>
      <label for="path">UCM path to upload to:</label><br/>
      <input id="path" type="input" name="path" value="" size="50"/><br/>
      <small>CMIS path to post to: <span id="cmispath"></span></small>
    </p>
    <form action="http://webcenter-stage.us.oracle.com/cmisrestprelim/cmis/children/UCM/IDC:Folder%2F18503" 
      method="POST"
      enctype="multipart/form-data">
      <p>
      	<label for="fileUpload">Select a document to upload:</label><br/>
      	<input type="file" name="fileUpload" size="50"/>
      </p>
      <p>
      	<label for="contentId">Content ID:</label><br/>
	<input type="text" name="contentId" value="put_something_random_here" size="50"/>
      </p>
      <p>
      	<label for="comments">Description:</label><br/>
      	<textarea name="comments" cols="43"></textarea><br/>
      </p>
      <input type="submit" value="Submit"/><D-r>
    </form>
  </body>
</html>
